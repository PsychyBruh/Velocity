import{$ as z,a as _e,g as De,b as L,c as se,u as ve,i as O,d as m,t as R,e as $,f as Z,m as We,h as Ie,j as Ue,k as N,l as P,o as K,n as J,p as ke,q as Xe,s as Ye,r as de,F as Se,S as te,v as He,w as ne,x as U,y as Je,z as Oe,_ as X,A as Ae,B as Ge,C as re,D as Qe,E as Ze,T as et}from"./index.596163ac.js";import{F as Ce}from"./Favicon.2ee1c950.js";import{C as j,o as tt,T as V,k as rt,a as nt}from"./Tab.baaf254f.js";import{n as at}from"./url.064866d1.js";import"./BareClient.06787bc0.js";const ge=Symbol("store-raw"),G=Symbol("store-node"),ot=Symbol("store-name");function Pe(e,r){let t=e[z];if(!t&&(Object.defineProperty(e,z,{value:t=new Proxy(e,it)}),!Array.isArray(e))){const n=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const l=n[o];a[l].get&&Object.defineProperty(e,l,{enumerable:a[l].enumerable,get:a[l].get.bind(t)})}}return t}function ae(e){let r;return e!=null&&typeof e=="object"&&(e[z]||!(r=Object.getPrototypeOf(e))||r===Object.prototype||Array.isArray(e))}function Q(e,r=new Set){let t,n,a,o;if(t=e!=null&&e[ge])return t;if(!ae(e)||r.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):r.add(e);for(let i=0,l=e.length;i<l;i++)a=e[i],(n=Q(a,r))!==a&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):r.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let c=0,h=i.length;c<h;c++)o=i[c],!l[o].get&&(a=e[o],(n=Q(a,r))!==a&&(e[o]=n))}return e}function pe(e){let r=e[G];return r||Object.defineProperty(e,G,{value:r={}}),r}function be(e,r,t){return e[r]||(e[r]=Te(t))}function st(e,r){const t=Reflect.getOwnPropertyDescriptor(e,r);return!t||t.get||!t.configurable||r===z||r===G||r===ot||(delete t.value,delete t.writable,t.get=()=>e[z][r]),t}function Ee(e){if(De()){const r=pe(e);(r._||(r._=Te()))()}}function lt(e){return Ee(e),Reflect.ownKeys(e)}function Te(e){const[r,t]=se(e,{equals:!1,internal:!0});return r.$=t,r}const it={get(e,r,t){if(r===ge)return e;if(r===z)return t;if(r===_e)return Ee(e),t;const n=pe(e),a=n.hasOwnProperty(r);let o=a?n[r]():e[r];if(r===G||r==="__proto__")return o;if(!a){const i=Object.getOwnPropertyDescriptor(e,r);De()&&(typeof o!="function"||e.hasOwnProperty(r))&&!(i&&i.get)&&(o=be(n,r,o)())}return ae(o)?Pe(o):o},has(e,r){return r===ge||r===z||r===_e||r===G||r==="__proto__"?!0:(this.get(e,r,e),r in e)},set(){return!0},deleteProperty(){return!0},ownKeys:lt,getOwnPropertyDescriptor:st};function oe(e,r,t,n=!1){if(!n&&e[r]===t)return;const a=e[r],o=e.length;t===void 0?delete e[r]:e[r]=t;let i=pe(e),l;(l=be(i,r,a))&&l.$(()=>t),Array.isArray(e)&&e.length!==o&&(l=be(i,"length",o))&&l.$(e.length),(l=i._)&&l.$()}function je(e,r){const t=Object.keys(r);for(let n=0;n<t.length;n+=1){const a=t[n];oe(e,a,r[a])}}function ct(e,r){if(typeof r=="function"&&(r=r(e)),r=Q(r),Array.isArray(r)){if(e===r)return;let t=0,n=r.length;for(;t<n;t++){const a=r[t];e[t]!==a&&oe(e,t,a)}oe(e,"length",n)}else je(e,r)}function Y(e,r,t=[]){let n,a=e;if(r.length>1){n=r.shift();const i=typeof n,l=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)Y(e,[n[c]].concat(r),t);return}else if(l&&i==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&Y(e,[c].concat(r),t);return}else if(l&&i==="object"){const{from:c=0,to:h=e.length-1,by:p=1}=n;for(let v=c;v<=h;v+=p)Y(e,[v].concat(r),t);return}else if(r.length>1){Y(e[n],r,[n].concat(t));return}a=e[n],t=[n].concat(t)}let o=r[0];typeof o=="function"&&(o=o(a,t),o===a)||n===void 0&&o==null||(o=Q(o),n===void 0||ae(a)&&ae(o)&&!Array.isArray(o)?je(a,o):oe(e,n,o))}function Me(...[e,r]){const t=Q(e||{}),n=Array.isArray(t),a=Pe(t);function o(...i){L(()=>{n&&i.length===1?ct(t,i[0]):Y(t,i)})}return[a,o]}const dt=R('<div class="toolbarbutton-1 h-6 flex items-center gap-1 rounded cursor-default px-1 select-none"><div class="w-[15px] h-[15px]"></div></div>');function ut(e){const{sortable:r,bookmark:t}=e;function n(a){/^javascript:/.test(t.url)?$().executeScript(decodeURIComponent(t.url.replace(/^javascript:/,""))):a.ctrlKey?new V(t.url,!1):$().navigate(t.url)}return(()=>{const a=dt.cloneNode(!0),o=a.firstChild;return a.$$contextmenu=i=>{i.data=[new j({text:"Open in new tab",onClick:()=>{tt(i,t.url,!1,!0)}}),new j({separator:!0}),new j({text:"Delete",onClick:()=>{t.delete()}}),new j({separator:!0})]},a.$$click=n,ve(r,a,()=>!0),O(o,m(Ce,{get src(){return se(t.icon)[0]}})),O(a,()=>t.name,null),a})()}Z(["click","contextmenu"]);var le=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},H=e=>{let r=new le(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=ft(r,t)),r},ft=(e,r)=>{let t,n;if(r.startsWith("matrix3d(")){const a=r.slice(9,-1).split(/, /);t=+a[12],n=+a[13]}else if(r.startsWith("matrix(")){const a=r.slice(7,-1).split(/, /);t=+a[4],n=+a[5]}else t=0,n=0;return new le({...e,x:e.x-t,y:e.y-n})},M=()=>({x:0,y:0}),me=(e,r)=>e.x===r.x&&e.y===r.y,ue=(e,r)=>new le({...e,x:e.x+r.x,y:e.y+r.y}),gt=(e,r)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),bt=(e,r)=>{const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),a=Math.min(e.right,r.right),o=Math.min(e.bottom,r.bottom),i=a-n,l=o-t;if(n<a&&t<o){const c=e.width*e.height,h=r.width*r.height,p=i*l;return p/(c+h-p)}return 0},fe=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,Ne=(e,r,t)=>{const n=e.transformed.center,a={distance:1/0,droppable:null};for(const o of r){const i=gt(n,o.layout.center);i<a.distance?(a.distance=i,a.droppable=o):i===a.distance&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},vt=(e,r,t)=>{const n=e.transformed,a={ratio:0,droppable:null};for(const o of r){const i=bt(n,o.layout);i>a.ratio?(a.ratio=i,a.droppable=o):i>0&&i===a.ratio&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},Le=ke(),Re=e=>{const r=We({collisionDetector:vt},e),[t,n]=Me({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),a=(s,d,u)=>{s.substring(0,s.length-1),P(()=>t[s][d])&&n(s,d,"transformers",u.id,u)},o=(s,d,u)=>{s.substring(0,s.length-1),P(()=>t[s][d])&&(!P(()=>t[s][d].transformers[u])||n(s,d,"transformers",u,void 0))},i=({id:s,node:d,layout:u,data:I})=>{const g=t.draggables[s],f={id:s,node:d,layout:u,data:I,_pendingCleanup:!1};let y;if(!g)Object.defineProperties(f,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return M();const _=Object.values(t.draggables[s].transformers);return _.sort((T,F)=>T.order-F.order),_.reduce((T,F)=>F.callback(T),M())}},transformed:{enumerable:!0,configurable:!0,get:()=>ue(t.draggables[s].layout,t.draggables[s].transform)}});else if(t.active.draggableId===s&&!t.active.overlay){const _={x:g.layout.x-u.x,y:g.layout.y-u.y},T="addDraggable-existing-offset",F=g.transformers[T],we=F?F.callback(_):_;y={id:T,order:100,callback:$e=>({x:$e.x+we.x,y:$e.y+we.y})},ce(()=>o("draggables",s,T))}L(()=>{n("draggables",s,f),y&&a("draggables",s,y)}),t.active.draggable&&A()},l=s=>{!P(()=>t.draggables[s])||(n("draggables",s,"_pendingCleanup",!0),queueMicrotask(()=>c(s)))},c=s=>{if(t.draggables[s]?._pendingCleanup){const d=t.active.draggableId===s;L(()=>{d&&n("active","draggableId",null),n("draggables",s,void 0)})}},h=({id:s,node:d,layout:u,data:I})=>{const g=t.droppables[s],f={id:s,node:d,layout:u,data:I,_pendingCleanup:!1};g||Object.defineProperties(f,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const y=Object.values(t.droppables[s].transformers);return y.sort((_,T)=>_.order-T.order),y.reduce((_,T)=>T.callback(_),M())}},transformed:{enumerable:!0,configurable:!0,get:()=>ue(t.droppables[s].layout,t.droppables[s].transform)}}),n("droppables",s,f),t.active.draggable&&A()},p=s=>{!P(()=>t.droppables[s])||(n("droppables",s,"_pendingCleanup",!0),queueMicrotask(()=>v(s)))},v=s=>{if(t.droppables[s]?._pendingCleanup){const d=t.active.droppableId===s;L(()=>{d&&n("active","droppableId",null),n("droppables",s,void 0)})}},x=({id:s,activators:d})=>{n("sensors",s,{id:s,activators:d,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[s].coordinates.current.x-t.sensors[s].coordinates.origin.x,y:t.sensors[s].coordinates.current.y-t.sensors[s].coordinates.origin.y}}}})},D=s=>{if(!P(()=>t.sensors[s]))return;const d=t.active.sensorId===s;L(()=>{d&&n("active","sensorId",null),n("sensors",s,void 0)})},w=({node:s,layout:d})=>{const u=t.active.overlay,I={node:s,layout:d};u||Object.defineProperties(I,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([g])=>g!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const g=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return g.sort((f,y)=>f.order-y.order),g.reduce((f,y)=>y.callback(f),M())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?ue(t.active.overlay.layout,t.active.overlay.transform):new le({x:0,y:0,width:0,height:0})}}),n("active","overlay",I)},k=()=>n("active","overlay",null),b=(s,d)=>{L(()=>{n("sensors",s,"coordinates",{origin:{...d},current:{...d}}),n("active","sensorId",s)})},S=s=>{const d=t.active.sensorId;!d||n("sensors",d,"coordinates","current",{...s})},E=()=>n("active","sensorId",null),B=(s,d)=>{const u={};for(const g of Object.values(t.sensors))if(g)for(const[f,y]of Object.entries(g.activators))u[f]??=[],u[f].push({sensor:g,activator:y});const I={};for(const g in u){let f=g;d&&(f=`on${g}`),I[f]=y=>{for(const{activator:_}of u[g]){if(t.active.sensor)break;_(y,s)}}}return I},A=()=>{let s=!1;const d=Object.values(t.draggables),u=Object.values(t.droppables),I=t.active.overlay;return L(()=>{const g=new WeakMap;for(const f of d)if(f){const y=f.layout;g.has(f.node)||g.set(f.node,H(f.node));const _=g.get(f.node);fe(y,_)||(n("draggables",f.id,"layout",_),s=!0)}for(const f of u)if(f){const y=f.layout;g.has(f.node)||g.set(f.node,H(f.node));const _=g.get(f.node);fe(y,_)||(n("droppables",f.id,"layout",_),s=!0)}if(I){const f=I.layout,y=H(I.node);fe(f,y)||(n("active","overlay","layout",y),s=!0)}}),s},C=()=>{const s=t.active.overlay??t.active.draggable;if(s){const d=r.collisionDetector(s,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),u=d?d.id:null;t.active.droppableId!==u&&n("active","droppableId",u)}},q=s=>{const d={id:"sensorMove",order:0,callback:u=>t.active.sensor?{x:u.x+t.active.sensor.coordinates.delta.x,y:u.y+t.active.sensor.coordinates.delta.y}:u};A(),L(()=>{n("active","draggableId",s),a("draggables",s,d)}),C()},ee=()=>{const s=P(()=>t.active.draggableId);L(()=>{s!==null&&o("draggables",s,"sensorMove"),n("active",["draggableId","droppableId"],null)}),A()},ye=s=>{N(()=>{const d=t.active.draggable;d&&P(()=>s({draggable:d}))})},ie=s=>{N(()=>{const d=t.active.draggable;if(d){const u=P(()=>t.active.overlay);Object.values(u?u.transform:d.transform),P(()=>s({draggable:d,overlay:u}))}})},xe=s=>{N(()=>{const d=t.active.draggable,u=t.active.droppable;d&&P(()=>s({draggable:d,droppable:u,overlay:t.active.overlay}))})},ce=s=>{N(({previousDraggable:d,previousDroppable:u,previousOverlay:I})=>{const g=t.active.draggable,f=g?t.active.droppable:null,y=g?t.active.overlay:null;return!g&&d&&P(()=>s({draggable:d,droppable:u,overlay:I})),{previousDraggable:g,previousDroppable:f,previousOverlay:y}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};ie(()=>C()),r.onDragStart&&ye(r.onDragStart),r.onDragMove&&ie(r.onDragMove),r.onDragOver&&xe(r.onDragOver),r.onDragEnd&&ce(r.onDragEnd);const Ke=[t,{addTransformer:a,removeTransformer:o,addDraggable:i,removeDraggable:l,addDroppable:h,removeDroppable:p,addSensor:x,removeSensor:D,setOverlay:w,clearOverlay:k,recomputeLayouts:A,detectCollisions:C,draggableActivators:B,sensorStart:b,sensorMove:S,sensorEnd:E,dragStart:q,dragEnd:ee,onDragStart:ye,onDragMove:ie,onDragOver:xe,onDragEnd:ce}];return m(Le.Provider,{value:Ke,get children(){return r.children}})},W=()=>Ie(Le)||null,pt=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:n,sensorStart:a,sensorMove:o,sensorEnd:i,dragStart:l,dragEnd:c}]=W(),h=250,p=10;K(()=>{t({id:e,activators:{pointerdown:k}})}),J(()=>{n(e)});const v=()=>r.active.sensorId===e,x={x:0,y:0};let D=null,w=null;const k=(C,q)=>{C.button===0&&(document.addEventListener("pointermove",E),document.addEventListener("pointerup",B),w=q,x.x=C.clientX,x.y=C.clientY,D=window.setTimeout(S,h))},b=()=>{D&&(clearTimeout(D),D=null),document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",B),document.removeEventListener("selectionchange",A)},S=()=>{r.active.sensor?v()||b():(a(e,x),l(w),A(),document.addEventListener("selectionchange",A))},E=C=>{const q={x:C.clientX,y:C.clientY};if(!r.active.sensor){const ee={x:q.x-x.x,y:q.y-x.y};Math.sqrt(ee.x**2+ee.y**2)>p&&S()}v()&&(C.preventDefault(),o(q))},B=C=>{b(),v()&&(C.preventDefault(),c(),i())},A=()=>{window.getSelection()?.removeAllRanges()}},Be=e=>(pt(),Ue(()=>e.children)),he=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),mt=(e,r={})=>{const[t,{addDraggable:n,removeDraggable:a,draggableActivators:o}]=W(),[i,l]=se(null);K(()=>{const v=i();v&&n({id:e,node:v,layout:H(v),data:r})}),J(()=>a(e));const c=()=>t.active.draggableId===e,h=()=>t.draggables[e]?.transform||M();return Object.defineProperties((v,x)=>{const D=x?x():{};N(()=>{const w=i(),k=o(e);if(w)for(const b in k)w.addEventListener(b,k[b]);J(()=>{if(w)for(const b in k)w.removeEventListener(b,k[b])})}),l(v),D.skipTransform||N(()=>{const w=h();if(me(w,M()))v.style.removeProperty("transform");else{const k=he(h());v.style.setProperty("transform",k.transform??null)}})},{ref:{enumerable:!0,value:l},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:h}})},ht=(e,r={})=>{const[t,{addDroppable:n,removeDroppable:a}]=W(),[o,i]=se(null);K(()=>{const p=o();p&&n({id:e,node:p,layout:H(p),data:r})}),J(()=>a(e));const l=()=>t.active.droppableId===e,c=()=>t.droppables[e]?.transform||M();return Object.defineProperties((p,v)=>{const x=v?v():{};i(p),x.skipTransform||N(()=>{const D=c();if(me(D,M()))p.style.removeProperty("transform");else{const w=he(c());p.style.setProperty("transform",w.transform??null)}})},{ref:{enumerable:!0,value:i},isActiveDroppable:{enumerable:!0,get:l},transform:{enumerable:!0,get:c}})},yt=(e,r,t)=>{const n=e.slice();return n.splice(t,0,...n.splice(r,1)),n},Ve=ke(),qe=e=>{const[r]=W(),[t,n]=Me({initialIds:[],sortedIds:[]}),a=l=>l>=0&&l<t.initialIds.length;N(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),N(()=>{r.active.draggableId&&r.active.droppableId?P(()=>{const l=t.sortedIds.indexOf(r.active.draggableId),c=t.initialIds.indexOf(r.active.droppableId);if(!a(l)||!a(c))n("sortedIds",[...e.ids]);else if(l!==c){const h=yt(t.sortedIds,l,c);n("sortedIds",h)}}):n("sortedIds",[...e.ids])});const i=[t,{}];return m(Ve.Provider,{value:i,get children(){return e.children}})},xt=()=>Ie(Ve)||null,wt=(e,r)=>t=>{e(t),r(t)},ze=(e,r={})=>{const[t,{addTransformer:n,removeTransformer:a}]=W(),[o]=xt(),i=mt(e,r),l=ht(e,r),c=wt(i.ref,l.ref),h=()=>o.initialIds.indexOf(e),p=()=>o.sortedIds.indexOf(e),v=b=>t.droppables[b]?.layout||null,x=()=>{const b=M(),S=h(),E=p();if(E!==S){const B=v(e),A=v(o.initialIds[E]);B&&A&&(b.x=A.x-B.x,b.y=A.y-B.y)}return b},D={id:"sortableOffset",order:100,callback:b=>{const S=x();return{x:b.x+S.x,y:b.y+S.y}}};K(()=>n("droppables",e,D)),J(()=>a("droppables",e,D.id));const w=()=>(e===t.active.draggableId&&!t.active.overlay?t.draggables[e]?.transform:t.droppables[e]?.transform)||M();return Object.defineProperties(b=>{i(b,()=>({skipTransform:!0})),l(b,()=>({skipTransform:!0})),N(()=>{const S=w();if(me(S,M()))b.style.removeProperty("transform");else{const E=he(w());b.style.setProperty("transform",E.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:w},isActiveDraggable:{enumerable:!0,get:()=>i.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>i.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>l.isActiveDroppable}})};function Fe(){const[,{onDragStart:e,onDragEnd:r,addTransformer:t,removeTransformer:n}]=W(),a={id:"constrain-y-axis",order:100,callback:o=>({...o,y:0})};return e(({draggable:o})=>{t("draggables",o.id,a)}),r(({draggable:o})=>{n("draggables",o.id,a.id)}),[]}const $t=R('<div id="PersonalToolbar" class="flex items-center h-7 w-full text-[11px] px-2 gap-2"></div>');function _t(){const e=({draggable:t,droppable:n})=>{if(t.node.classList.remove("z-20"),t&&n){const a=de(),o=a.findIndex(l=>l.id===t.id),i=a.findIndex(l=>l.id===n.id);if(o!==i){const l=a.slice();l.splice(i,0,...l.splice(o,1)),He(l)}}},r=({draggable:t})=>t.node.classList.add("z-20");return m(te,{get when(){return Xe()},get children(){const t=$t.cloneNode(!0);return t.$$contextmenu=n=>{n.data||(n.data=[]),n.data.push(new j({text:"Hide bookmarks",onClick:()=>{Ye(!1)}}))},O(t,m(Re,{onDragEnd:e,onDragStart:r,collisionDetector:Ne,get children(){return[m(Fe,{}),m(Be,{}),m(qe,{get ids(){return de().map(n=>n.id)},get children(){return m(Se,{get each(){return de()},children:n=>{const a=ze(n.id);return m(ut,{sortable:a,bookmark:n})}})}})]}})),t}})}Z(["contextmenu"]);const Dt=R('<div class="w-4 h-4 overflow-hidden"><div id="tab-throbber" class="w-[960px] h-4"></div></div>'),It=R("<div></div>"),kt=R('<i class="text-[10px] fa-regular fa-volume mt-[2px]"></i>'),St=R('<div id="tab-background"><div class="w-4 h-4"></div><div><p class="text-clip whitespace-nowrap w-full text-xs font-light" style="-webkit-mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);"></p></div><div><i class="fa-light fa-xmark text-[10px] mt-[2px]"></i></div></div>');function Ot(e){const{sortable:r}=e;return(()=>{const t=St.cloneNode(!0),n=t.firstChild,a=n.nextSibling,o=a.firstChild,i=a.nextSibling;return t.$$contextmenu=l=>{l.data=[new j({text:"New tab",onClick:()=>{new V("about:newTab",!0)}}),new j({separator:!0}),new j({text:"Reload",onClick:()=>{e.tab.reload()}}),new j({text:"Duplicate",onClick:()=>{new V(e.tab.url(),!0)}}),new j({separator:!0}),new j({text:"Close",onClick:()=>{e.tab.close()}})]},t.$$mousedown=()=>{e.tab.focus=!0},ve(r,t,()=>!0),O(n,m(te,{get when(){return e.tab.loading()},get children(){return Dt.cloneNode(!0)}}),null),O(n,m(te,{get when(){return!e.tab.loading()},get children(){const l=It.cloneNode(!0);return O(l,m(Ce,{get src(){return e.tab.icon}})),ne(()=>U(l,`h-full w-full ${e.tab.small()&&e.tab.focus()?"hidden":""}`)),l}}),null),O(t,m(te,{get when(){return e.tab.playing()},get children(){return kt.cloneNode(!0)}}),a),O(o,()=>e.tab.title()),i.$$mousedown=l=>l.stopPropagation(),Je(i,"click",e.tab.close.bind(e.tab),!0),ne(l=>{const c=`h-9 ${e.tab.pinned()||e.tab.small()?"":"w-48"} p-2 pr-1 flex items-center gap-[5px] text-sm rounded shadow-inner-lg overflow-hidden`,h=e.tab.focus(),p=`flex-1 overflow-hidden ${e.tab.small()||e.tab.pinned()?"hidden":""}`,v=`close-icon h-6 w-6 flex items-center justify-center hover:bg-opacity-50 rounded ${e.tab.small()&&!e.tab.focus()||e.tab.pinned()?"hidden":""}`;return c!==l._v$&&U(t,l._v$=c),h!==l._v$2&&Oe(t,"data-active",l._v$2=h),p!==l._v$3&&U(a,l._v$3=p),v!==l._v$4&&U(i,l._v$4=v),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}Z(["mousedown","contextmenu","click"]);const At=R('<div class="flex" id="tabs" style="width: env(titlebar-area-width, 100%); min-height: env(titlebar-area-height, auto);margin-left: env(titlebar-area-x, 0);"><div class="flex w-full items-center h-11  px-[2px] cursor-default select-none gap-1"><div class="flex items-center justify-center" id="opentab"><div class="toolbarbutton-1 h-9 w-9 rounded flex items-center justify-center"><i class="fa-regular fa-plus text-xs mt-[2px]"></i></div></div></div></div>');function Ct(){const e=({draggable:n,droppable:a})=>{if(n.node.classList.remove("z-20"),n&&a){const o=re(),i=o.findIndex(c=>c.id===n.id),l=o.findIndex(c=>c.id===a.id);if(i!==l){const c=o.slice();c.splice(l,0,...c.splice(i,1)),Qe(c)}}},r=({draggable:n})=>n.node.classList.add("z-20");K(async()=>{await X(()=>import("./registerProtocols.41303029.js"),["assets/registerProtocols.41303029.js","assets/Protocol.b55961c7.js","assets/index.596163ac.js","assets/index.c5dd7436.css"]);const a=new URLSearchParams(window.location.search).get("url"),o=JSON.parse(localStorage.getItem("tabs")||"[]");if(a)new V(a,!0),window.history.replaceState({},document.title,"/");else if(o.length&&Ae()["general.startup.openPreviousTabs"]){const i=parseInt(localStorage.getItem("activeTab")||"0");o.forEach(c=>{new V(c,!1)});const l=Array.from(Ge())[i];l&&(l.focus=!0)}else new V("about:newTab",!0)});function t(){new V("about:newTab",!0)}return(()=>{const n=At.cloneNode(!0),a=n.firstChild,o=a.firstChild,i=o.firstChild;return O(a,m(Re,{onDragEnd:e,onDragStart:r,collisionDetector:Ne,get children(){return[m(Fe,{}),m(Be,{}),m(qe,{get ids(){return re().map(l=>l.id)},get children(){return m(Se,{get each(){return re()},children:l=>{const c=ze(l.id);return m(Ot,{sortable:c,tab:l})}})}})]}}),o),i.$$click=t,n})()}Z(["click"]);const Pt=R('<div class="flex items-center gap-2 w-full h-10 p-2" id="browser-toolbar"><div class="flex gap-1 items-center"><div class="toolbarbutton-1 h-8 w-8 rounded flex items-center justify-center"><i class="fa-light fa-arrow-left mt-[2px]"></i></div><div class="toolbarbutton-1 h-8 w-8 rounded flex items-center justify-center"><i class="fa-light fa-arrow-right mt-[2px]"></i></div><div class="toolbarbutton-1 h-8 w-8 rounded flex items-center justify-center"><i></i></div></div><div class="flex items-center flex-1 h-[32px] text-sm rounded" id="urlbar"><div class="flex h-8 w-8 rounded items-center justify-center mx-[2px]"><i class="fa-light fa-magnifying-glass mt-[2px]"></i></div><input id="url_bar" autocomplete="off" class="flex-1 flex items-center leading-8 h-full text-sm rounded bg-transparent focus:outline-none"></div><div class="flex gap-1 items-center"><div class="toolbarbutton-1 h-8 w-8 rounded flex items-center justify-center"><i class="fa-light fa-gear mt-[2px] text-sm"></i></div><a target="_blank" href="https://github.com/PsychyBruh/Velocity" class="cursor-default"><div class="toolbarbutton-1 h-8 w-8 rounded flex items-center justify-center"><i class="fa-brands fa-github mt-[2px] text-sm"></i></div></a></div></div>');function Et(){function e(){$()?.loading()?$()?.stop():($().search=!1,$()?.reload())}function r(){$().search=!1,$()?.goForward()}function t(){$().search=!1,$()?.goBack()}function n(a){a.addEventListener("keydown",o=>{o.key==="Enter"?(o.preventDefault(),a.value&&($()?.navigate(a.value),$().search=!1,a.blur())):o.key==="Escape"?($().search=!1,a.blur()):setTimeout(()=>$().search=a.value,0)})}return(()=>{const a=Pt.cloneNode(!0),o=a.firstChild,i=o.firstChild,l=i.nextSibling,c=l.nextSibling,h=c.firstChild,p=o.nextSibling,v=p.firstChild,x=v.nextSibling,D=p.nextSibling,w=D.firstChild;i.$$click=t,l.$$click=r,c.$$click=e;const k=n;return typeof k=="function"?ve(k,x):n=x,w.$$click=()=>{new V("about:preferences",!0)},ne(b=>{const S=`fa-light ${$()?.loading()?"fa-xmark":"fa-rotate-right"} mt-[2px]`,E=`Search with ${Ze[Ae()["search.defaults.searchEngine"]||"google"].name} or enter address`;return S!==b._v$&&U(h,b._v$=S),E!==b._v$2&&Oe(x,"placeholder",b._v$2=E),b},{_v$:void 0,_v$2:void 0}),ne(()=>x.value=$()?.search()!==!1?$()?.search():at($()?.url()||"")),a})()}Z(["click"]);const Tt=R('<main class="h-full flex flex-col"><div id="navigator-toolbox-background"><div id="navigator-toolbox"></div></div><main id="content" class="w-full bg-white flex-1"></main></main>');function Vt(){return K(async()=>{await X(()=>import("./registerSW.d2dc8ec2.js"),[]),await X(()=>import("./registerKeybinds.3eb5792f.js"),["assets/registerKeybinds.3eb5792f.js","assets/index.e8530d6e.js","assets/Keybind.d64ce3dc.js","assets/index.596163ac.js","assets/index.c5dd7436.css","assets/Tab.baaf254f.js","assets/url.064866d1.js","assets/BareClient.06787bc0.js"]),await X(()=>import("./addonStoreModifier.e8aac082.js"),["assets/addonStoreModifier.e8aac082.js","assets/RuntimeModifier.729da609.js","assets/BareClient.06787bc0.js","assets/index.596163ac.js","assets/index.c5dd7436.css","assets/Tab.baaf254f.js","assets/url.064866d1.js","assets/index.e8530d6e.js"]),await X(()=>import("./index.f7a7cd49.js"),["assets/index.f7a7cd49.js","assets/RuntimeModifier.729da609.js","assets/BareClient.06787bc0.js","assets/index.596163ac.js","assets/index.c5dd7436.css","assets/Tab.baaf254f.js","assets/url.064866d1.js","assets/index.e8530d6e.js","assets/Keybind.d64ce3dc.js","assets/Protocol.b55961c7.js"]),window.addEventListener("keydown",rt),addEventListener("beforeunload",e=>{const r=JSON.parse(localStorage.getItem("preferences")||"{}");if(re().length>1&&r["general.tabs.confirmBeforeClosing"])return e.preventDefault(),e.returnValue="Confirm before closing multiple tabs"},{capture:!0})}),(()=>{const e=Tt.cloneNode(!0),r=e.firstChild,t=r.firstChild,n=r.nextSibling;return O(e,m(et,{children:"Velocity"}),r),O(t,m(Ct,{}),null),O(t,m(Et,{}),null),O(t,m(_t,{}),null),O(e,m(nt,{}),n),e})()}export{Vt as default};
