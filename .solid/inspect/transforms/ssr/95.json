{
  "id": "/workspaces/Velocity/src/scripts/registerKeybinds.ts",
  "deps": [],
  "plugins": [
    "vite:load-fallback",
    "vite:esbuild"
  ],
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "import { IDBPDatabase, openDB } from \"idb\";\nimport Keybind from \"~/API/Keybind\";\nimport Tab from \"~/API/Tab\";\nimport { bookmarksShown, setBookmarksShown } from \"~/data/appState\";\nimport { preferences } from \"~/util/\";\nimport { getActiveTab } from \"~/util/\";\n\nconst db: IDBPDatabase = await openDB(\"keybinds\", 1, {\n  upgrade(db) {\n    db.createObjectStore(\"keybinds\", {\n      keyPath: \"id\"\n    });\n  }\n});\n\nconst tx = db.transaction(\"keybinds\", \"readwrite\");\nconst store = tx.objectStore(\"keybinds\");\n\nconst keybinds = await store.getAll();\n\nnew Keybind({\n  id: 0,\n  name: \"Reload\",\n  description: \"Reload the current tab\",\n  key: \"r\",\n  ctrl: true,\n  callback() {\n    getActiveTab().reload();\n  }\n});\n\nnew Keybind({\n  id: 1,\n  name: \"Bookmark\",\n  description: \"Bookmark the current tab\",\n  key: \"d\",\n  ctrl: true,\n  callback() {\n    getActiveTab().bookmark();\n  }\n});\n\nnew Keybind({\n  id: 2,\n  name: \"View Source\",\n  description: \"View the source of the current tab\",\n  key: \"u\",\n  ctrl: true,\n  callback() {\n    new Tab(`view-source:${getActiveTab().url()}`, true);\n  }\n});\n\nnew Keybind({\n  id: 3,\n  name: \"Search\",\n  description: \"Search the current tab\",\n  key: \"e\",\n  ctrl: true,\n  callback() {\n    const searchElement = document.querySelector<HTMLInputElement>(\"#url_bar\");\n    searchElement?.focus();\n    searchElement?.select();\n    getActiveTab().search =\n      getActiveTab().search() !== false ? getActiveTab().search : \"\";\n  }\n});\n\nnew Keybind({\n  id: 4,\n  name: \"History\",\n  description: \"Open the history page\",\n  key: \"h\",\n  ctrl: true,\n  callback() {\n    new Tab(\"about:history\", true);\n  }\n});\n\nnew Keybind({\n  id: 5,\n  name: \"New Tab\",\n  description: \"Open a new tab\",\n  key: \"t\",\n  alt: true,\n  callback() {\n    new Tab(\"about:newTab\", true);\n  }\n});\n\nnew Keybind({\n  id: 6,\n  name: \"Close Tab\",\n  description: \"Close the current tab\",\n  key: \"w\",\n  alt: true,\n  callback() {\n    getActiveTab().close();\n  }\n});\n\nnew Keybind({\n  id: 7,\n  name: \"Back\",\n  description: \"Go back in the current tab\",\n  key: \"ArrowLeft\",\n  alt: true,\n  callback() {\n    getActiveTab().goBack();\n  }\n});\n\nnew Keybind({\n  id: 8,\n  name: \"Forward\",\n  description: \"Go forward in the current tab\",\n  key: \"ArrowRight\",\n  alt: true,\n  callback() {\n    getActiveTab().goForward();\n  }\n});\n\nnew Keybind({\n  id: 9,\n  name: \"Dev Tools\",\n  description: \"Open the dev tools for the current tab\",\n  key: \"i\",\n  ctrl: true,\n  shift: true,\n  callback() {\n    getActiveTab().setDevTools();\n  }\n});\n\nnew Keybind({\n  id: 10,\n  name: \"Bookmarks\",\n  description: \"Toggle the bookmarks bar\",\n  key: \"b\",\n  ctrl: true,\n  shift: true,\n  callback() {\n    setBookmarksShown(!bookmarksShown());\n    localStorage.setItem(\n      \"preferences\",\n      JSON.stringify(\n        Object.assign(preferences(), {\n          [\"bookmarks.shown\"]: bookmarksShown()\n        })\n      )\n    );\n  }\n});\n\nkeybinds.map((keybind) => {\n  new Keybind(keybind);\n});\n",
      "start": 1681131430977,
      "end": 1681131431225
    },
    {
      "name": "vite:esbuild",
      "result": "import { openDB } from \"idb\";\nimport Keybind from \"~/API/Keybind\";\nimport Tab from \"~/API/Tab\";\nimport { bookmarksShown, setBookmarksShown } from \"~/data/appState\";\nimport { preferences } from \"~/util/\";\nimport { getActiveTab } from \"~/util/\";\nconst db = await openDB(\"keybinds\", 1, {\n  upgrade(db2) {\n    db2.createObjectStore(\"keybinds\", {\n      keyPath: \"id\"\n    });\n  }\n});\nconst tx = db.transaction(\"keybinds\", \"readwrite\");\nconst store = tx.objectStore(\"keybinds\");\nconst keybinds = await store.getAll();\nnew Keybind({\n  id: 0,\n  name: \"Reload\",\n  description: \"Reload the current tab\",\n  key: \"r\",\n  ctrl: true,\n  callback() {\n    getActiveTab().reload();\n  }\n});\nnew Keybind({\n  id: 1,\n  name: \"Bookmark\",\n  description: \"Bookmark the current tab\",\n  key: \"d\",\n  ctrl: true,\n  callback() {\n    getActiveTab().bookmark();\n  }\n});\nnew Keybind({\n  id: 2,\n  name: \"View Source\",\n  description: \"View the source of the current tab\",\n  key: \"u\",\n  ctrl: true,\n  callback() {\n    new Tab(`view-source:${getActiveTab().url()}`, true);\n  }\n});\nnew Keybind({\n  id: 3,\n  name: \"Search\",\n  description: \"Search the current tab\",\n  key: \"e\",\n  ctrl: true,\n  callback() {\n    const searchElement = document.querySelector(\"#url_bar\");\n    searchElement?.focus();\n    searchElement?.select();\n    getActiveTab().search = getActiveTab().search() !== false ? getActiveTab().search : \"\";\n  }\n});\nnew Keybind({\n  id: 4,\n  name: \"History\",\n  description: \"Open the history page\",\n  key: \"h\",\n  ctrl: true,\n  callback() {\n    new Tab(\"about:history\", true);\n  }\n});\nnew Keybind({\n  id: 5,\n  name: \"New Tab\",\n  description: \"Open a new tab\",\n  key: \"t\",\n  alt: true,\n  callback() {\n    new Tab(\"about:newTab\", true);\n  }\n});\nnew Keybind({\n  id: 6,\n  name: \"Close Tab\",\n  description: \"Close the current tab\",\n  key: \"w\",\n  alt: true,\n  callback() {\n    getActiveTab().close();\n  }\n});\nnew Keybind({\n  id: 7,\n  name: \"Back\",\n  description: \"Go back in the current tab\",\n  key: \"ArrowLeft\",\n  alt: true,\n  callback() {\n    getActiveTab().goBack();\n  }\n});\nnew Keybind({\n  id: 8,\n  name: \"Forward\",\n  description: \"Go forward in the current tab\",\n  key: \"ArrowRight\",\n  alt: true,\n  callback() {\n    getActiveTab().goForward();\n  }\n});\nnew Keybind({\n  id: 9,\n  name: \"Dev Tools\",\n  description: \"Open the dev tools for the current tab\",\n  key: \"i\",\n  ctrl: true,\n  shift: true,\n  callback() {\n    getActiveTab().setDevTools();\n  }\n});\nnew Keybind({\n  id: 10,\n  name: \"Bookmarks\",\n  description: \"Toggle the bookmarks bar\",\n  key: \"b\",\n  ctrl: true,\n  shift: true,\n  callback() {\n    setBookmarksShown(!bookmarksShown());\n    localStorage.setItem(\n      \"preferences\",\n      JSON.stringify(\n        Object.assign(preferences(), {\n          [\"bookmarks.shown\"]: bookmarksShown()\n        })\n      )\n    );\n  }\n});\nkeybinds.map((keybind) => {\n  new Keybind(keybind);\n});\n",
      "start": 1681131431225,
      "end": 1681131431300
    }
  ],
  "virtual": false
}